var HoverMaker=Class.create({initialize:function(a){if((typeof a)=="undefined"){a={}}this.watchclass=(a.slideclass)?a.slideclass:".hover";this.imagedir=(a.imagedir)?a.imagedir:(window.BASE_URL?(window.BASE_URL+"images/"):(window.location.protocol+"//"+window.location.hostname+"/images/"));this.elementsToWatch=$$(this.watchclass);this.hoverstates=(a.hoverstates)?a.hoverstates:{};this.begin.bind(this)()},getHoverSrc:function(c){var b;if(this.hoverstates[c.id]){b=this.imagedir+this.hoverstates[c.id]["hover"]}else{if(c.src.include("-over")){return c.src}var e=c.src.split("/");var f=e.pop();var g=f.split(".");var d=g.pop();var a=g.join(".")+"-over."+d;b=e.join("/")+"/"+a}return b},preload_overstate:function(d){var b=window.document.createElement("img");b.setAttribute("id","imagepreload");b.style.position="absolute";b.style.left="-10000px";b.style.top="-10000px";window.document.body.appendChild(b);var c=this.getHoverSrc.bind(this)(d);b.src=c;var a={height:b.getHeight(),width:b.getWidth()};b.remove();return a},preload_image:function(c){var b=window.document.createElement("img");b.setAttribute("id","imagepreload");b.style.position="absolute";b.style.left="-10000px";b.style.top="-10000px";window.document.body.appendChild(b);b.src=c;var a={height:b.getHeight(),width:b.getWidth()};b.remove();return a},doHover:function(c){var b=c.findElement();var a=this.getHoverSrc.bind(this)(b);b.src=a},endHover:function(b){var a=b.findElement();if(this.hoverstates[a.id]){a.src=this.imagedir+this.hoverstates[a.id]["off"]}else{a.src=a.src.gsub("-over.",".")}},begin:function(){this.elementsToWatch.each((function(a){this.preload_overstate.bind(this)(a)}).bind(this));this.elementsToWatch.each((function(a){if(a){a.observe("mouseover",this.doHover.bind(this));a.observe("mouseout",this.endHover.bind(this))}}).bind(this))}});